-- Supabase stock_snapshot table creation SQL
CREATE TABLE IF NOT EXISTS stock_snapshot (
  code TEXT PRIMARY KEY,
  name TEXT,
  date TEXT,
  close REAL,
  volume BIGINT,
  close_prev REAL,
  vol_prev BIGINT,
  ma3 REAL,
  ma20 REAL,
  ma60 REAL,
  ma120 REAL,
  ma200 REAL,
  wma3 REAL,
  wma20 REAL,
  wma60 REAL,
  wma120 REAL,
  wma200 REAL,
  mfi14 REAL,
  vwap20 REAL,
  chg14_pct REAL,
  rsi REAL,
  macd REAL,
  signal REAL,
  vp_poc REAL,
  vp_upper REAL,
  vp_lower REAL,
  month_k REAL,
  month_d REAL,
  daily_k REAL,
  daily_d REAL,
  week_k REAL,
  week_d REAL,
  ma3_prev REAL,
  ma20_prev REAL,
  ma60_prev REAL,
  ma120_prev REAL,
  ma200_prev REAL,
  wma3_prev REAL,
  wma20_prev REAL,
  wma60_prev REAL,
  wma120_prev REAL,
  wma200_prev REAL,
  mfi14_prev REAL,
  vwap20_prev REAL,
  chg14_pct_prev REAL,
  month_k_prev REAL,
  month_d_prev REAL,
  daily_k_prev REAL,
  daily_d_prev REAL,
  week_k_prev REAL,
  week_d_prev REAL,
  smi REAL,
  svi REAL,
  nvi REAL,
  pvi REAL,
  clv REAL,
  major_holders_pct REAL,
  foreign_buy BIGINT,
  trust_buy BIGINT,
  dealer_buy BIGINT,
  adl REAL,
  rs REAL,
  smi_signal BIGINT,
  svi_signal BIGINT,
  nvi_signal BIGINT,
  vsa_signal BIGINT,
  smart_score BIGINT,
  smi_prev REAL,
  svi_prev REAL,
  nvi_prev REAL,
  smart_score_prev BIGINT,
  vol_div_signal BIGINT,
  weekly_nvi_signal BIGINT,
  vwap60 REAL,
  bbw REAL,
  fib_0618 REAL,
  weekly_close REAL,
  weekly_open REAL,
  monthly_close REAL,
  monthly_open REAL,
  vwap200 REAL,
  mansfield_rs REAL,
  margin_balance BIGINT,
  margin_util_rate REAL,
  short_balance BIGINT,
  short_util_rate REAL,
  div_3day_bull BIGINT,
  div_3day_bear BIGINT,
  vol_ma3 REAL,
  pvi_prev REAL,
  pe REAL,
  pb REAL,
  yield REAL,
  amount REAL,
  ma5 REAL,
  ma25 REAL,
  ma25_slope REAL,
  vol_ma5 REAL,
  vol_ma60 REAL,
  bias_ma5 REAL,
  macd_diff REAL,
  macd_dea REAL,
  macd_bar REAL,
  kdj_k REAL,
  kdj_d REAL,
  kdj_j REAL,
  rsi12 REAL,
  lwr REAL,
  bbi REAL,
  mtm REAL,
  mtm_ma REAL,
  pattern_morning_star BIGINT,
  pattern_evening_star BIGINT,
  total_shareholders BIGINT,
  vsbc_upper REAL,
  vsbc_lower REAL,
  vp_high REAL,
  vp_low REAL,
  open REAL,
  high REAL,
  low REAL,
  foreign_streak BIGINT,
  trust_streak BIGINT,
  dealer_streak BIGINT,
  foreign_cumulative BIGINT,
  trust_cumulative BIGINT,
  dealer_cumulative BIGINT,
  vsbc REAL,
  vsbc_pct REAL,
  vsbc_prev REAL
);
