# 更新日誌 (CHANGELOG)

> 台灣股市分析系統 更新記錄

---

## [2024-12-20] 顏色規則修正

### 修正項目
- **收盤價顏色** — 改用 `change_pct` 正負值判斷顏色
- **14日漲跌幅 (CHG14)** — 改用數值本身正負判斷顏色
- **成交量顏色** — 量增=紅、量縮=綠、爆量=紫
- **漲停/跌停** — 新增滿版背景色 (白字紅底/白字綠底)

### 顏色規則
| 數值 | 條件 | 顏色 |
|------|------|------|
| 收盤價 | ≥ +9.5% | 白字紅底 (漲停) |
| | > 0% | 紅字 |
| | < 0% | 綠字 |
| | ≤ -9.5% | 白字綠底 (跌停) |
| 成交量 | ≥ 2.0x | 紫字 (爆量) |
| | > 1.0x | 紅字 (量增) |
| | < 1.0x | 綠字 (量縮) |

### 修改檔案
- `最終修正.py` — `get_color_code()`, `get_volume_color()`, `format_scan_result()`

---

## [2024-12-19] 主頁系統狀態資訊

### 新增功能
- 主選單顯示系統狀態資訊 (資料庫路徑、最新更新、股票總數、資料範圍)

### 修改檔案
- `最終修正.py` — `main_menu()` 調用 `display_system_status()`

---

## [2024-12-19] 開發規範總則

### 新增文件
- 將開發規範寫入 `proposal.md` 和 `sdd/01-requirements.md`

---

## [2024-12-20] 優化流程控制

### 修改項目
- **單鍵選擇** — 恢復 `read_single_key` 使用 `msvcrt`，適用於資料管理與系統維護選單
- **輸入選擇** — 主選單與市場掃描維持 `input()`，支援股票代號輸入

### 修改檔案
- `最終修正.py` — `read_single_key()` 函數

---

## [2024-12-20] 優化集保大戶下載邏輯

### 修改項目
- **集保大戶更新** — 將自動下載時段擴展為「週五、週六、週日」，方便週末補執行

### 修改檔案
- `最終修正.py` — `step3_6_download_major_holders()`

---

*文檔建立日期: 2024-12-20*

---

## [2025-12-29] 啟動效能優化

### 修正項目
- **啟動速度** — 暫時關閉 `twstock` 自動更新檢查 (pip install check)，解決啟動緩慢問題。

### 修改檔案
- `最終修正.py` — `_should_update_twstock()`

### [2025-12-29] 恢復 twstock 自動更新

### 修正項目
- **功能恢復** — 依使用者要求，重新開啟 `twstock` 自動更新檢查。
